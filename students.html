<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dropalert - Student Dropout Risk Detection</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>

  <style>
    @keyframes fadeUp {0% {opacity:0; transform:translateY(20px);} 100% {opacity:1; transform:translateY(0);}}
    .animate-fadeUp {animation:fadeUp 0.6s ease-out forwards;}

    @keyframes fadeSection {0% {opacity:0; transform:translateY(20px);} 100% {opacity:1; transform:translateY(0);}}
    .fade-section {animation:fadeSection 0.5s ease-out forwards;}

    aside button:hover {transform: translateX(5px); transition: transform 0.2s ease, background-color 0.3s ease;}
    table tbody tr:hover {background-color: rgba(139,92,246,0.08); transition: background-color 0.3s ease;}
    .sidebar-button {transition: all 0.3s ease;}
  </style>
</head>
<body class="bg-gray-50">

<div id="root"></div>

<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<script type="text/babel">

function Sidebar({ current, setCurrent }) {
  const options = ["Data Center", "Analytics", "Settings"];
  return (
    <aside className="w-52 h-screen bg-gradient-to-b from-purple-700 to-purple-900 text-white p-6 fixed space-y-6">
      <h1 className="text-2xl font-bold mb-6 animate-fadeUp">Dropalert</h1>

      {/* Back to Home Button */}
      <button
        onClick={() => window.location.href = "index.html"}
        className="w-full mb-4 text-left px-3 py-2 rounded-md font-medium bg-gradient-to-r from-purple-600 to-teal-500 hover:from-purple-700 hover:to-teal-600 transition animate-fadeUp"
      >
        ‚Üê Back to Home
      </button>

      {/* Options */}
      <ul className="space-y-4">
        {options.map((opt,i)=>(
          <li key={i} className="animate-fadeUp" style={{animationDelay: `${i*100}ms`}}>
            <button
              onClick={()=>setCurrent(opt)}
              className={`w-full text-left px-3 py-2 rounded-md font-medium transition ${
                current===opt 
                  ? "bg-gradient-to-r from-purple-600 to-teal-500 text-white" 
                  : "text-gray-100 hover:bg-gradient-to-r hover:from-purple-600 hover:to-teal-500"
              }`}
            >
              {opt}
            </button>
          </li>
        ))}
      </ul>
    </aside>
  );
}



// üíæ Data Center Component
const DataCenter = ({ setData, setCurrent }) => {
  const handleFile = (e) => {
    const file = e.target.files[0]; 
    if(!file) return;

    const reader = new FileReader();
    reader.onload = (evt) => {
      const data = new Uint8Array(evt.target.result);
      const workbook = XLSX.read(data,{type:"array"});
      const sheet = workbook.Sheets[workbook.SheetNames[0]];
      const json = XLSX.utils.sheet_to_json(sheet,{header:1});
      const filtered = json.map(row=>row.filter((_,i)=>i<28 || i>32));
      setData(filtered);
      setCurrent("Analytics"); // auto-switch to Analytics
    };
    reader.readAsArrayBuffer(file);
  };

  return (
    <div className="fade-section max-w-5xl mx-auto space-y-12">
      <h1 className="text-3xl font-bold text-purple-700 mb-6 text-center">Data Center</h1>

      {/* Upload */}
      <div className="relative border-2 border-dashed border-purple-400 bg-gradient-to-r from-purple-50 to-teal-50 rounded-2xl p-10 flex flex-col items-center justify-center shadow-md hover:shadow-xl transition-all transform hover:scale-[1.02] cursor-pointer animate-fadeUp">
        <svg xmlns="http://www.w3.org/2000/svg" className="w-16 h-16 text-purple-600 mb-4 animate-bounce" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M7 16a4 4 0 01.88-7.906A5.001 5.001 0 0117 9h1a4 4 0 110 8H7z"/>
        </svg>
        <p className="text-gray-700 mb-3 text-lg font-medium">Drop your files here or click to upload</p>
        <p className="text-sm text-gray-500 mb-4">(Supports CSV & Excel files)</p>
        <label className="bg-gradient-to-r from-purple-600 to-teal-500 hover:from-purple-700 hover:to-teal-600 text-white px-6 py-2 rounded-full shadow-lg transition cursor-pointer">
          Choose Files
          <input type="file" className="hidden" multiple onChange={handleFile}/>
        </label>
      </div>

      {/* Data Structure */}
      <div className="space-y-8">
        <h2 className="text-2xl font-semibold text-gray-800 mb-8 text-center">Expected Data Structure</h2>
        <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
          {[
            {title:"Attendance Data", items:['student_id','name','class','attendance_percentage'],colorFrom:"purple-100", colorTo:"purple-50", textColor:"purple-700"},
            {title:"Test Scores", items:['student_id','subject','test_date','score','max_score'],colorFrom:"teal-100", colorTo:"teal-50", textColor:"teal-700", delay:200},
            {title:"Fee Records", items:['student_id','fee_type','amount','due_date','payment_status','last_payment_date'],colorFrom:"pink-100", colorTo:"pink-50", textColor:"pink-700", delay:400},
          ].map((sec,i)=>(
            <div key={i} className={`bg-gradient-to-br from-${sec.colorFrom} to-${sec.colorTo} rounded-2xl shadow-md p-6 transform hover:scale-105 transition duration-300 animate-fadeUp`} style={{animationDelay:`${sec.delay||0}ms`}}>
              <h3 className={`font-semibold ${sec.textColor} mb-4`}>{sec.title}</h3>
              <ul className="space-y-2 text-gray-700">{sec.items.map((it,j)=><li key={j} className="bg-white shadow px-3 py-1 rounded">{it}</li>)}</ul>
            </div>
          ))}
        </div>
      </div>
    </div>
  );
};

function Analytics({ data }) {
  if(!data || data.length===0) return <div className="flex items-center justify-center h-full text-gray-500 text-lg fade-section">No data uploaded yet.</div>;
  return (
    <div className="p-6 overflow-x-auto fade-section">
      <h2 className="text-2xl font-bold mb-4 text-purple-600 animate-fadeUp">Analytics</h2>
      <table className="table-auto border-collapse border border-gray-300 w-full text-xs shadow-md animate-fadeUp">
        <thead className="bg-purple-100">
          <tr>
            {data[0].map((col,i)=><th key={i} className="border border-gray-300 px-2 py-1 text-left max-w-[120px] truncate">{col}</th>)}
          </tr>
        </thead>
        <tbody>
          {data.slice(1).map((row,i)=>
            <tr key={i} className="hover:bg-gray-50 animate-fadeUp" style={{animationDelay:`${i*50}ms`}}>
              {row.map((cell,j)=><td key={j} className="border border-gray-300 px-2 py-1 truncate">{cell}</td>)}
            </tr>
          )}
        </tbody>
      </table>
    </div>
  );
}

function Settings() {
  return (
    <div className="fade-section max-w-4xl mx-auto space-y-8 p-6">
      <h2 className="text-2xl font-bold text-purple-700 text-center mb-4 animate-fadeUp">‚öôÔ∏è Settings</h2>
      <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div className="bg-blue-100 p-6 rounded-xl shadow-md animate-fadeUp">
          <h3 className="font-semibold text-blue-700 mb-2">Theme Selection</h3>
          <p className="text-gray-700">Choose a light/dark theme for the application.</p>
        </div>
        <div className="bg-red-100 p-6 rounded-xl shadow-md animate-fadeUp" style={{animationDelay:"200ms"}}>
          <h3 className="font-semibold text-red-700 mb-2">Notification Preferences</h3>
          <p className="text-gray-700">Set up notifications for student data updates or alerts.</p>
        </div>
        <div className="bg-green-100 p-6 rounded-xl shadow-md animate-fadeUp" style={{animationDelay:"400ms"}}>
          <h3 className="font-semibold text-green-700 mb-2">Account Settings</h3>
          <p className="text-gray-700">Manage your account information and credentials.</p>
        </div>
      </div>
    </div>
  );
}

function App() {
  const [current,setCurrent] = React.useState("Data Center");
  const [data,setData] = React.useState([]);

  return (
    <div className="flex">
      <Sidebar current={current} setCurrent={setCurrent}/>
      <main className="ml-52 w-full h-screen bg-gray-50 overflow-auto">
        {current==="Data Center" && <DataCenter setData={setData} setCurrent={setCurrent}/>}
        {current==="Analytics" && <Analytics data={data}/>}
        {current==="Settings" && <Settings/>}
      </main>
    </div>
  );
}

const root = ReactDOM.createRoot(document.getElementById("root"));
root.render(<App/>);

</script>
</body>
</html>
